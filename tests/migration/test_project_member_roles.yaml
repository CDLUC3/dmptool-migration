test_project_member_roles:
  model: migration.project_member_roles
  vars:
    execution_time: "2025-10-01 00:00:00"

  inputs:
    intermediate.project_members:
      columns:
        oldRoleId: INT
      rows:
        - id: 1
          oldRoleId: NULL
          memberRoleId: 15
          createdById: 1
          created: "2024-01-01 00:00:00"
          modifiedById: 1
          modified: "2024-01-02 00:00:00"

        - id: 2
          oldRoleId: 7
          memberRoleId: NULL
          createdById: 2
          created: "2025-01-01 00:00:00"
          modifiedById: 2
          modified: "2025-01-02 00:00:00"

    seeds.role_mappings:
      format: csv
      path: "./seeds/role_mappings.csv"

  outputs:
    query:
      rows:
        - id: 1
          projectMemberId: 1
          memberRoleId: 15
          createdById: 1
          created: "2024-01-01 00:00:00"
          modifiedById: 1
          modified: "2024-01-02 00:00:00"

        - id: 2
          projectMemberId: 2
          memberRoleId: 7
          createdById: 2
          created: "2025-01-01 00:00:00"
          modifiedById: 2
          modified: "2025-01-02 00:00:00"

        - id: 3
          projectMemberId: 2
          memberRoleId: 5
          createdById: 2
          created: "2025-01-01 00:00:00"
          modifiedById: 2
          modified: "2025-01-02 00:00:00"

        - id: 4
          projectMemberId: 2
          memberRoleId: 2
          createdById: 2
          created: "2025-01-01 00:00:00"
          modifiedById: 2
          modified: "2025-01-02 00:00:00"