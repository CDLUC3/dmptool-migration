test_project_fundings:
  model: migration.project_fundings
  vars:
    execution_time: "2025-10-01 00:00:00"

  inputs:
    migration.projects:
      columns:
        id: INT
        old_plan_id: INT
        isTestProject: BOOLEAN
        createdById: INT
        modifiedById: INT
      rows:
        - id: 1
          old_plan_id: 1
        - id: 2
          old_plan_id: 2

    intermediate.plans:
      rows:
        - id: 1
          owner_email: "owner1@example.com"
          funder_id: "https://dmptool.org/affiliations/0"
          funding_status: 1
          grant_id: "12345678"
          grant_number: "NSF ABC123"
          created_at: "2024-01-01 00:00:00"
          updated_at: "2024-01-02 00:00:00"
        - id: 2
          owner_email: "owner2@example.com"
          funder_id: "https://ror.org/123abc"
          funding_status: 0
          grant_id: "abcd1234"
          grant_number: "NSF ABC456"
          created_at: "2025-01-01 00:00:00"
          updated_at: "2025-01-02 00:00:00"

    intermediate.users:
      rows:
        - id: 1
          email: "owner1@example.com"
          role: "SUPERADMIN"

        - id: 2
          email: "owner2@example.com"
          role: NULL

  outputs:
    query:
      rows:
        - id: 1
          old_plan_id: 1
          projectId: 1
          affiliationId: "https://dmptool.org/affiliations/0"
          status: "GRANTED"
          funderProjectNumber: NULL
          grantId: "12345678"
          funderOpportunityNumber: "NSF ABC123"
          createdById: 1
          created: "2024-01-01 00:00:00"
          modifiedById: 1
          modified: "2024-01-02 00:00:00"

        - id: 2
          old_plan_id: 2
          projectId: 2
          affiliationId: "https://ror.org/123abc"
          status: "PLANNED"
          funderProjectNumber: NULL
          grantId: "abcd1234"
          funderOpportunityNumber: "NSF ABC456"
          createdById: 2
          created: "2025-01-01 00:00:00"
          modifiedById: 2
          modified: "2025-01-02 00:00:00"
